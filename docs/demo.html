<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Demo - SignaturePad.js</title>
    <meta name="description" content="Experience the full power of SignaturePad.js with real-time configuration, multiple export formats, and professional examples.">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>üñãÔ∏è</text></svg>">
    
    <!-- Shared Styles -->
    <link rel="stylesheet" href="shared.css">
</head>
<body>
    <div class="container">
        <!-- Navigation -->
        <nav class="nav fade-in">
            <a href="./" class="nav-logo">üñãÔ∏è Signature Pad JS</a>
            <div class="nav-links">
                <a href="./" class="nav-link">Home</a>
                <a href="installation.html" class="nav-link">Installation</a>
                <a href="basic-usage.html" class="nav-link">Basic Usage</a>
                <a href="advanced-usage.html" class="nav-link">Advanced</a>
                <a href="demo.html" class="nav-link active">Demo</a>
                <a href="https://github.com/niel-blanca/signature-pad-js" class="nav-link">GitHub</a>
                <a href="https://www.npmjs.com/package/@niel-blanca/signature-pad" class="nav-link">NPM</a>
            </div>
        </nav>

        <!-- Page Header -->
        <div class="section fade-in">
            <div class="section-header">
                <h1 class="section-title">üéÆ Interactive Demo Playground</h1>
                <p class="section-subtitle">Experience the full power of SignaturePad.js with real-time configuration, multiple export formats, and professional examples. Create, customize, and export signatures with ease.</p>
            </div>
        </div>

        <!-- Main Demo Section -->
        <div class="card fade-in">
            <div class="card-content">
                <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 30px; align-items: start;">
                    <!-- Signature Canvas Area -->
                    <div>
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h2 style="margin: 0; color: var(--text-color);">‚úçÔ∏è Signature Canvas</h2>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <span style="color: var(--text-light); font-size: 0.9rem;">Canvas: 600√ó300</span>
                                <div class="status-indicator status-empty" id="main-status">Ready</div>
                            </div>
                        </div>
                        
                        <div id="main-pad" class="signature-container large">
                            <div class="signature-placeholder">
                                Click or touch here to start drawing your signature
                            </div>
                        </div>
                        
                        <!-- Action Buttons -->
                        <div class="controls" style="margin-top: 20px;">
                            <button class="btn btn-primary" onclick="downloadSignature('png')">üì• Download PNG</button>
                            <button class="btn btn-primary" onclick="downloadSignature('jpeg')">üì• Download JPEG</button>
                            <button class="btn btn-info" onclick="downloadSignature('svg')">üì• Download SVG</button>
                            <button class="btn btn-secondary" onclick="clearCanvas()">üóëÔ∏è Clear</button>
                            <button class="btn btn-success" onclick="undoLast()">‚Ü∂ Undo</button>
                        </div>
                    </div>
                    
                    <!-- Settings Panel -->
                    <div>
                        <h3 style="margin-bottom: 20px; color: var(--text-color);">üé® Pen Settings</h3>
                        
                        <div class="controls">
                            <div class="control-group">
                                <label>Pen Color</label>
                                <input type="color" value="#000000" class="color-picker" id="pen-color"
                                       onchange="updatePenColor(this.value)">
                                <div style="display: grid; grid-template-columns: repeat(6, 1fr); gap: 5px; margin-top: 10px;">
                                    <button style="width: 30px; height: 30px; border-radius: 50%; border: 2px solid #ddd; background: #000; cursor: pointer;" onclick="updatePenColor('#000000')"></button>
                                    <button style="width: 30px; height: 30px; border-radius: 50%; border: 2px solid #ddd; background: #3182ce; cursor: pointer;" onclick="updatePenColor('#3182ce')"></button>
                                    <button style="width: 30px; height: 30px; border-radius: 50%; border: 2px solid #ddd; background: #e53e3e; cursor: pointer;" onclick="updatePenColor('#e53e3e')"></button>
                                    <button style="width: 30px; height: 30px; border-radius: 50%; border: 2px solid #ddd; background: #38a169; cursor: pointer;" onclick="updatePenColor('#38a169')"></button>
                                    <button style="width: 30px; height: 30px; border-radius: 50%; border: 2px solid #ddd; background: #d69e2e; cursor: pointer;" onclick="updatePenColor('#d69e2e')"></button>
                                    <button style="width: 30px; height: 30px; border-radius: 50%; border: 2px solid #ddd; background: #9f7aea; cursor: pointer;" onclick="updatePenColor('#9f7aea')"></button>
                                </div>
                            </div>
                            
                            <div class="control-group">
                                <label>Min Width: <span id="min-width-value">0.5</span></label>
                                <input type="range" min="0.1" max="3" step="0.1" value="0.5" class="thickness-slider"
                                       oninput="updateMinWidth(this.value)">
                            </div>
                            
                            <div class="control-group">
                                <label>Max Width: <span id="max-width-value">2.5</span></label>
                                <input type="range" min="1" max="8" step="0.1" value="2.5" class="thickness-slider"
                                       oninput="updateMaxWidth(this.value)">
                            </div>
                            
                            <div style="border: 1px solid var(--border-color); border-radius: var(--border-radius); padding: 15px; margin-top: 20px; background: var(--bg-secondary);">
                                <h4 style="margin: 0 0 10px 0; color: var(--text-color); font-size: 0.9rem;">Stroke Preview</h4>
                                <div style="width: 100%; height: 40px; background: white; border: 1px solid var(--border-color); border-radius: var(--border-radius); position: relative; overflow: hidden;">
                                    <svg width="100%" height="40" style="position: absolute;">
                                        <path id="stroke-preview" d="M 10 20 Q 50 10 90 20 Q 130 30 170 20" 
                                              stroke="#000000" stroke-width="2" fill="none" stroke-linecap="round"/>
                                    </svg>
                                </div>
                            </div>
                        </div>
                        
                        <h3 style="margin: 30px 0 20px 0; color: var(--text-color);">üéõÔ∏è Canvas Settings</h3>
                        
                        <div class="controls">
                            <div class="control-group">
                                <label>Background Color</label>
                                <input type="color" value="#ffffff" class="color-picker" id="bg-color"
                                       onchange="updateBackgroundColor(this.value)">
                            </div>
                            
                            <div class="control-group">
                                <label>Velocity Filter: <span id="velocity-value">0.7</span></label>
                                <input type="range" min="0" max="1" step="0.1" value="0.7" class="thickness-slider"
                                       oninput="updateVelocityFilter(this.value)">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Export Options Section -->
        <div class="card fade-in">
            <div class="card-header">
                <span class="card-icon">üíæ</span>
                <div>
                    <h2 class="card-title">Export & Data Management</h2>
                    <p class="card-subtitle">Save, load, and manage signature data in multiple formats</p>
                </div>
            </div>
            <div class="card-content">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                    <div class="controls">
                        <h4 style="margin-bottom: 15px; color: var(--text-color);">üì• Export Options</h4>
                        <button class="btn btn-primary" onclick="exportData('png')" style="width: 100%; margin-bottom: 10px;">Export as PNG</button>
                        <button class="btn btn-primary" onclick="exportData('jpeg')" style="width: 100%; margin-bottom: 10px;">Export as JPEG</button>
                        <button class="btn btn-primary" onclick="exportData('svg')" style="width: 100%; margin-bottom: 10px;">Export as SVG</button>
                        <button class="btn btn-info" onclick="exportData('json')" style="width: 100%;">Export as JSON</button>
                    </div>
                    
                    <div class="controls">
                        <h4 style="margin-bottom: 15px; color: var(--text-color);">üíæ Data Management</h4>
                        <button class="btn btn-success" onclick="saveToLocalStorage()" style="width: 100%; margin-bottom: 10px;">Save to Browser</button>
                        <button class="btn btn-secondary" onclick="loadFromLocalStorage()" style="width: 100%; margin-bottom: 10px;">Load from Browser</button>
                        <button class="btn btn-warning" onclick="clearLocalStorage()" style="width: 100%;">Clear Browser Data</button>
                    </div>
                    
                    <div class="controls">
                        <h4 style="margin-bottom: 15px; color: var(--text-color);">üì§ Share Options</h4>
                        <button class="btn btn-info" onclick="copyToClipboard()" style="width: 100%; margin-bottom: 10px;">Copy as Data URL</button>
                        <button class="btn btn-info" onclick="shareSignature()" style="width: 100%; margin-bottom: 10px;">Share Signature</button>
                        <input type="file" id="file-input" accept="image/*" style="display: none;" onchange="loadFromFile(this)">
                        <button class="btn btn-secondary" onclick="document.getElementById('file-input').click()" style="width: 100%;">Load from File</button>
                    </div>
                </div>
                
                <div class="output-section" style="margin-top: 30px;">
                    <h4 style="margin-bottom: 15px;">Data Output Preview:</h4>
                    <div class="output-content" id="data-output">
No data exported yet. Use the export buttons above to see output here.
                    </div>
                </div>
            </div>
        </div>

        <!-- Sample Signatures Section -->
        <div class="card fade-in">
            <div class="card-header">
                <span class="card-icon">üìù</span>
                <div>
                    <h2 class="card-title">Sample Signatures</h2>
                    <p class="card-subtitle">Load pre-made signature samples to test features</p>
                </div>
            </div>
            <div class="card-content">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                    <div style="text-align: center;">
                        <div style="width: 100%; height: 100px; border: 1px solid var(--border-color); border-radius: var(--border-radius); margin-bottom: 10px; background: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 200 100\"><path d=\"M20,50 Q60,20 100,50 Q140,80 180,50\" stroke=\"%23000\" stroke-width=\"2\" fill=\"none\"/></svg>') center/contain no-repeat;"></div>
                        <button class="btn btn-secondary" onclick="loadSampleSignature('elegant')" style="width: 100%;">Load Elegant</button>
                    </div>
                    
                    <div style="text-align: center;">
                        <div style="width: 100%; height: 100px; border: 1px solid var(--border-color); border-radius: var(--border-radius); margin-bottom: 10px; background: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 200 100\"><path d=\"M20,70 L40,30 L60,70 L80,30 L100,70 L120,30 L140,70 L160,30 L180,70\" stroke=\"%23000\" stroke-width=\"3\" fill=\"none\"/></svg>') center/contain no-repeat;"></div>
                        <button class="btn btn-secondary" onclick="loadSampleSignature('bold')" style="width: 100%;">Load Bold</button>
                    </div>
                    
                    <div style="text-align: center;">
                        <div style="width: 100%; height: 100px; border: 1px solid var(--border-color); border-radius: var(--border-radius); margin-bottom: 10px; background: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 200 100\"><path d=\"M20,50 Q40,30 60,50 Q80,70 100,50 Q120,30 140,50 Q160,70 180,50\" stroke=\"%23000\" stroke-width=\"1.5\" fill=\"none\"/></svg>') center/contain no-repeat;"></div>
                        <button class="btn btn-secondary" onclick="loadSampleSignature('cursive')" style="width: 100%;">Load Cursive</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Getting Started -->
        <div class="section fade-in">
            <div class="section-header">
                <h2 class="section-title">üöÄ Ready to Implement?</h2>
                <p class="section-subtitle">Get started with SignaturePad.js in your project</p>
            </div>
            <div class="section-content">
                <div class="features-grid">
                    <div class="feature-card">
                        <span class="feature-icon">üì¶</span>
                        <h3>Installation</h3>
                        <p>Learn how to install and set up SignaturePad.js in your project.</p>
                        <a href="installation.html" class="btn btn-primary mt-20">Install Now</a>
                    </div>
                    <div class="feature-card">
                        <span class="feature-icon">üìñ</span>
                        <h3>Documentation</h3>
                        <p>Explore basic and advanced usage examples to master all features.</p>
                        <a href="basic-usage.html" class="btn btn-secondary mt-20">View Docs</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Load signature_pad library -->
    <script src="https://cdn.jsdelivr.net/npm/signature_pad@4.0.0/dist/signature_pad.umd.min.js"></script>
    <!-- Load shared JavaScript -->
    <script src="shared.js"></script>

    <script>
        let mainPad;
        let undoData = [];

        // Initialize demo when page loads
        document.addEventListener('DOMContentLoaded', function() {
            signaturePads.init([
                { 
                    id: 'main-pad', 
                    options: {
                        penColor: '#000000',
                        backgroundColor: '#ffffff',
                        minWidth: 0.5,
                        maxWidth: 2.5,
                        velocityFilterWeight: 0.7,
                        onBegin: function() {
                            // Save state for undo
                            if (!mainPad.isEmpty()) {
                                undoData.push(mainPad.toDataURL());
                            }
                            updateStatus('Drawing...');
                        },
                        onEnd: function() {
                            updateStatus('Ready');
                        }
                    }
                }
            ]);
            mainPad = signaturePads['main-pad'];
        });

        // Update functions
        function updatePenColor(color) {
            if (mainPad) {
                mainPad.penColor = color;
                document.getElementById('pen-color').value = color;
                document.getElementById('stroke-preview').setAttribute('stroke', color);
            }
        }

        function updateMinWidth(value) {
            if (mainPad) {
                mainPad.minWidth = parseFloat(value);
                document.getElementById('min-width-value').textContent = value;
                updateStrokePreview();
            }
        }

        function updateMaxWidth(value) {
            if (mainPad) {
                mainPad.maxWidth = parseFloat(value);
                document.getElementById('max-width-value').textContent = value;
                updateStrokePreview();
            }
        }

        function updateBackgroundColor(color) {
            if (mainPad) {
                mainPad.backgroundColor = color;
                document.getElementById('bg-color').value = color;
            }
        }

        function updateVelocityFilter(value) {
            if (mainPad) {
                mainPad.velocityFilterWeight = parseFloat(value);
                document.getElementById('velocity-value').textContent = value;
            }
        }

        function updateStrokePreview() {
            const minWidth = parseFloat(document.getElementById('min-width-value').textContent);
            const maxWidth = parseFloat(document.getElementById('max-width-value').textContent);
            const avgWidth = (minWidth + maxWidth) / 2;
            document.getElementById('stroke-preview').setAttribute('stroke-width', avgWidth);
        }

        function updateStatus(message) {
            const statusEl = document.getElementById('main-status');
            statusEl.textContent = message;
            statusEl.className = 'status-indicator ' + (message === 'Ready' ? 'status-empty' : 'status-has-content');
        }

        // Canvas actions
        function clearCanvas() {
            if (mainPad) {
                mainPad.clear();
                undoData = [];
                updateStatus('Ready');
            }
        }

        function undoLast() {
            if (undoData.length > 0) {
                const lastState = undoData.pop();
                mainPad.fromDataURL(lastState);
            } else if (!mainPad.isEmpty()) {
                mainPad.clear();
            }
        }

        // Download functions
        function downloadSignature(format) {
            if (!mainPad || mainPad.isEmpty()) {
                alert('Please draw a signature first!');
                return;
            }

            let dataURL, filename;
            switch (format) {
                case 'png':
                    dataURL = mainPad.toDataURL();
                    filename = 'signature.png';
                    break;
                case 'jpeg':
                    dataURL = mainPad.toDataURL('image/jpeg', 0.8);
                    filename = 'signature.jpg';
                    break;
                case 'svg':
                    const svgData = mainPad.toSVG();
                    dataURL = 'data:image/svg+xml;base64,' + btoa(svgData);
                    filename = 'signature.svg';
                    break;
            }

            const link = document.createElement('a');
            link.download = filename;
            link.href = dataURL;
            link.click();
        }

        // Export functions
        function exportData(format) {
            if (!mainPad || mainPad.isEmpty()) {
                alert('Please draw a signature first!');
                return;
            }

            let data, output;
            switch (format) {
                case 'png':
                    data = mainPad.toDataURL();
                    output = 'PNG Data URL:\n' + data.substring(0, 100) + '...';
                    break;
                case 'jpeg':
                    data = mainPad.toDataURL('image/jpeg', 0.8);
                    output = 'JPEG Data URL:\n' + data.substring(0, 100) + '...';
                    break;
                case 'svg':
                    data = mainPad.toSVG();
                    output = 'SVG Data:\n' + data;
                    break;
                case 'json':
                    data = JSON.stringify(mainPad.toData(), null, 2);
                    output = 'JSON Point Data:\n' + data;
                    break;
            }

            document.getElementById('data-output').textContent = output;
        }

        // Storage functions
        function saveToLocalStorage() {
            if (!mainPad || mainPad.isEmpty()) {
                alert('Please draw a signature first!');
                return;
            }

            const data = mainPad.toDataURL();
            localStorage.setItem('signaturePadDemo', data);
            alert('Signature saved to browser storage!');
        }

        function loadFromLocalStorage() {
            const data = localStorage.getItem('signaturePadDemo');
            if (data) {
                mainPad.fromDataURL(data);
                alert('Signature loaded from browser storage!');
            } else {
                alert('No signature found in browser storage!');
            }
        }

        function clearLocalStorage() {
            localStorage.removeItem('signaturePadDemo');
            alert('Browser storage cleared!');
        }

        // Share functions
        function copyToClipboard() {
            if (!mainPad || mainPad.isEmpty()) {
                alert('Please draw a signature first!');
                return;
            }

            const dataURL = mainPad.toDataURL();
            navigator.clipboard.writeText(dataURL).then(() => {
                alert('Signature data URL copied to clipboard!');
            }).catch(() => {
                alert('Failed to copy to clipboard. Please try again.');
            });
        }

        function shareSignature() {
            if (!mainPad || mainPad.isEmpty()) {
                alert('Please draw a signature first!');
                return;
            }

            if (navigator.share) {
                const canvas = mainPad._canvas;
                canvas.toBlob((blob) => {
                    const file = new File([blob], 'signature.png', { type: 'image/png' });
                    navigator.share({
                        title: 'My Signature',
                        text: 'Check out my signature created with SignaturePad.js',
                        files: [file]
                    });
                });
            } else {
                alert('Web Share API not supported in this browser.');
            }
        }

        function loadFromFile(input) {
            const file = input.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    mainPad.fromDataURL(e.target.result);
                };
                reader.readAsDataURL(file);
            }
        }

        // Sample signatures
        function loadSampleSignature(type) {
            // Create sample signature data (simplified)
            let sampleData;
            switch (type) {
                case 'elegant':
                    sampleData = generateSamplePath('elegant');
                    break;
                case 'bold':
                    sampleData = generateSamplePath('bold');
                    break;
                case 'cursive':
                    sampleData = generateSamplePath('cursive');
                    break;
            }
            
            // For demo purposes, we'll just show an alert
            // In a real implementation, you'd have actual signature data
            alert(`Loading ${type} signature sample...`);
            // mainPad.fromData(sampleData);
        }

        function generateSamplePath(type) {
            // This would contain actual signature path data
            // For demo purposes, returning empty array
            return [];
        }
    </script>
</body>
</html>