<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Usage - SignaturePad.js</title>
    <link rel="stylesheet" href="shared.css">
    <style>
        .advanced-section {
            margin: 3rem 0;
            border: 1px solid var(--border-color);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .advanced-header {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            color: white;
            padding: 2rem;
            margin: 0;
            position: relative;
            overflow: hidden;
        }

        .advanced-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="2" fill="white" opacity="0.1"/></svg>') repeat;
            background-size: 20px 20px;
        }

        .advanced-header h2 {
            margin: 0;
            font-size: 1.8rem;
            font-weight: 700;
            position: relative;
            z-index: 1;
        }

        .advanced-header p {
            margin: 0.5rem 0 0 0;
            opacity: 0.9;
            position: relative;
            z-index: 1;
            font-size: 1.1rem;
        }

        .advanced-content {
            padding: 2.5rem;
            background: var(--background-color);
        }

        .feature-showcase {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        .showcase-item {
            background: var(--background-secondary);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .showcase-item:hover {
            border-color: var(--primary-color);
            box-shadow: 0 8px 24px rgba(99, 102, 241, 0.15);
        }

        .showcase-header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 1.5rem;
            font-weight: 600;
            font-size: 1.2rem;
        }

        .showcase-body {
            padding: 2rem;
        }

        .code-tabs {
            display: flex;
            border-bottom: 2px solid var(--border-color);
            margin-bottom: 1rem;
            background: var(--background-secondary);
            border-radius: 8px 8px 0 0;
            overflow: hidden;
        }

        .code-tab {
            padding: 0.75rem 1.5rem;
            background: transparent;
            border: none;
            cursor: pointer;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 0.9rem;
            color: var(--text-secondary);
            transition: all 0.2s ease;
        }

        .code-tab.active {
            background: var(--primary-color);
            color: white;
        }

        .code-tab:hover:not(.active) {
            background: var(--border-color);
        }

        .code-panel {
            display: none;
            background: var(--background-color);
            border: 1px solid var(--border-color);
            border-top: none;
            border-radius: 0 0 8px 8px;
            padding: 1.5rem;
        }

        .code-panel.active {
            display: block;
        }

        .code-panel pre {
            margin: 0;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
            overflow-x: auto;
        }

        .settings-panel {
            background: var(--background-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .setting-item {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .setting-label {
            font-weight: 600;
            color: var(--text-color);
            font-size: 0.9rem;
        }

        .setting-input {
            padding: 0.5rem;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 0.9rem;
        }

        .setting-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.1);
        }

        .color-input {
            height: 40px;
            border-radius: 4px;
            border: 1px solid var(--border-color);
            cursor: pointer;
        }

        .event-log {
            background: #000;
            color: #0f0;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 0.8rem;
            padding: 1rem;
            border-radius: 6px;
            height: 120px;
            overflow-y: auto;
            margin: 1rem 0;
            border: 1px solid #333;
        }

        .event-log::-webkit-scrollbar {
            width: 8px;
        }

        .event-log::-webkit-scrollbar-track {
            background: #333;
        }

        .event-log::-webkit-scrollbar-thumb {
            background: #555;
            border-radius: 4px;
        }

        .pro-tip {
            background: linear-gradient(135deg, #fef3c7, #f3e8ff);
            border-left: 4px solid #f59e0b;
            padding: 1.5rem;
            margin: 2rem 0;
            border-radius: 0 8px 8px 0;
            position: relative;
        }

        .pro-tip::before {
            content: "üí°";
            position: absolute;
            top: 1rem;
            left: -2px;
            background: #f59e0b;
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .pro-tip-title {
            font-weight: 700;
            color: #92400e;
            margin-bottom: 0.5rem;
            margin-left: 2rem;
            font-size: 1.1rem;
        }

        .pro-tip p {
            margin-left: 2rem;
            margin-bottom: 0;
            color: #78350f;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .stat-item {
            text-align: center;
            padding: 1rem;
            background: var(--background-secondary);
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
            display: block;
        }

        .stat-label {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-top: 0.25rem;
        }

        .export-formats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .format-btn {
            padding: 0.75rem;
            border: 2px solid var(--border-color);
            background: var(--background-secondary);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center;
            font-weight: 600;
        }

        .format-btn:hover {
            border-color: var(--primary-color);
            background: var(--primary-color);
            color: white;
        }

        @media (max-width: 768px) {
            .feature-showcase {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            
            .settings-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .export-formats {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <nav class="nav">
        <div class="nav-container">
            <div class="nav-logo">
                <span class="logo-icon">‚úçÔ∏è</span>
                <span class="logo-text">SignaturePad.js</span>
            </div>
            <div class="nav-links">
                <a href="index.html" class="nav-link">Home</a>
                <a href="installation.html" class="nav-link">Installation</a>
                <a href="basic-usage.html" class="nav-link">Basic Usage</a>
                <a href="advanced-usage.html" class="nav-link active">Advanced</a>
                <a href="demo.html" class="nav-link">Demo</a>
            </div>
        </div>
    </nav>

    <main class="main">
        <div class="container">
            <!-- Page Header -->
            <div class="page-header">
                <h1 class="page-title">Advanced Usage Guide</h1>
                <p class="page-subtitle">
                    Master the powerful features of SignaturePad.js with professional-grade examples, 
                    event handling, custom configurations, and enterprise-level integrations.
                </p>
            </div>

            <!-- Real-time Configuration Section -->
            <section class="advanced-section">
                <div class="advanced-header">
                    <h2>üéõÔ∏è Real-time Configuration</h2>
                    <p>Dynamically adjust signature pad settings and see changes instantly</p>
                </div>
                <div class="advanced-content">
                    <div class="feature-showcase">
                        <div class="showcase-item">
                            <div class="showcase-header">Live Configuration Panel</div>
                            <div class="showcase-body">
                                <div class="settings-panel">
                                    <h4 style="margin-top: 0;">Adjust Settings</h4>
                                    <div class="settings-grid">
                                        <div class="setting-item">
                                            <label class="setting-label">Background Color</label>
                                            <input type="color" class="color-input" id="bg-color" value="#ffffff">
                                        </div>
                                        <div class="setting-item">
                                            <label class="setting-label">Pen Color</label>
                                            <input type="color" class="color-input" id="pen-color" value="#000000">
                                        </div>
                                        <div class="setting-item">
                                            <label class="setting-label">Min Width</label>
                                            <input type="range" class="setting-input" id="min-width" min="0.1" max="5" step="0.1" value="0.5">
                                            <span id="min-width-value">0.5</span>
                                        </div>
                                        <div class="setting-item">
                                            <label class="setting-label">Max Width</label>
                                            <input type="range" class="setting-input" id="max-width" min="1" max="10" step="0.1" value="2.5">
                                            <span id="max-width-value">2.5</span>
                                        </div>
                                        <div class="setting-item">
                                            <label class="setting-label">Velocity Filter</label>
                                            <input type="range" class="setting-input" id="velocity" min="0" max="1" step="0.1" value="0.7">
                                            <span id="velocity-value">0.7</span>
                                        </div>
                                        <div class="setting-item">
                                            <label class="setting-label">Throttle (ms)</label>
                                            <input type="range" class="setting-input" id="throttle" min="0" max="50" step="1" value="16">
                                            <span id="throttle-value">16</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="signature-container large">
                                    <canvas id="config-pad" class="signature-canvas"></canvas>
                                    <div class="signature-status" id="config-status">Adjust settings above and draw to see changes</div>
                                </div>
                                
                                <div class="controls">
                                    <button class="btn btn-secondary" onclick="signatureDocs.clearPad('config-pad')">Clear</button>
                                    <button class="btn btn-primary" onclick="resetToDefaults()">Reset to Defaults</button>
                                </div>
                            </div>
                        </div>

                        <div class="showcase-item">
                            <div class="showcase-header">Configuration Code</div>
                            <div class="showcase-body">
                                <div class="code-tabs">
                                    <button class="code-tab active" onclick="switchTab(event, 'config-js')">JavaScript</button>
                                    <button class="code-tab" onclick="switchTab(event, 'config-html')">HTML</button>
                                </div>
                                
                                <div id="config-js" class="code-panel active">
                                    <pre><code id="current-config">// Current configuration will appear here
const signaturePad = new SignaturePad(canvas, {
    backgroundColor: '#ffffff',
    penColor: '#000000',
    minWidth: 0.5,
    maxWidth: 2.5,
    velocityFilterWeight: 0.7,
    throttle: 16
});</code></pre>
                                </div>
                                
                                <div id="config-html" class="code-panel">
                                    <pre><code>&lt;canvas id="signature-pad" width="500" height="300"&gt;&lt;/canvas&gt;

&lt;!-- Color controls --&gt;
&lt;input type="color" id="pen-color" value="#000000"&gt;
&lt;input type="color" id="bg-color" value="#ffffff"&gt;

&lt;!-- Range controls --&gt;
&lt;input type="range" id="min-width" min="0.1" max="5" step="0.1"&gt;
&lt;input type="range" id="max-width" min="1" max="10" step="0.1"&gt;</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Event Handling Section -->
            <section class="advanced-section">
                <div class="advanced-header">
                    <h2>‚ö° Event Handling & Monitoring</h2>
                    <p>Listen to signature pad events for advanced integrations and user analytics</p>
                </div>
                <div class="advanced-content">
                    <div class="feature-showcase">
                        <div class="showcase-item">
                            <div class="showcase-header">Event Monitor</div>
                            <div class="showcase-body">
                                <div class="signature-container medium">
                                    <canvas id="events-pad" class="signature-canvas"></canvas>
                                    <div class="signature-status" id="events-status">Draw to see real-time events</div>
                                </div>
                                
                                <div class="stats-grid">
                                    <div class="stat-item">
                                        <span class="stat-value" id="stroke-count">0</span>
                                        <span class="stat-label">Strokes</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-value" id="point-count">0</span>
                                        <span class="stat-label">Points</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-value" id="avg-velocity">0</span>
                                        <span class="stat-label">Avg Velocity</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-value" id="duration">0s</span>
                                        <span class="stat-label">Duration</span>
                                    </div>
                                </div>
                                
                                <div class="event-log" id="event-log">
                                    Welcome to Event Monitor - Draw on the canvas above to see events...
                                </div>
                                
                                <div class="controls">
                                    <button class="btn btn-secondary" onclick="clearEventLog()">Clear Log</button>
                                    <button class="btn btn-secondary" onclick="signatureDocs.clearPad('events-pad'); resetStats()">Clear Canvas</button>
                                </div>
                            </div>
                        </div>

                        <div class="showcase-item">
                            <div class="showcase-header">Event Implementation</div>
                            <div class="showcase-body">
                                <div class="code-tabs">
                                    <button class="code-tab active" onclick="switchTab(event, 'events-js')">JavaScript</button>
                                    <button class="code-tab" onclick="switchTab(event, 'events-analytics')">Analytics</button>
                                </div>
                                
                                <div id="events-js" class="code-panel active">
                                    <pre><code>// Event listeners for signature pad
signaturePad.on('beginStroke', (event) =&gt; {
    console.log('Stroke started', event);
    strokeCount++;
    strokeStartTime = Date.now();
});

signaturePad.on('endStroke', (event) =&gt; {
    console.log('Stroke ended', event);
    const duration = Date.now() - strokeStartTime;
    console.log(`Stroke duration: ${duration}ms`);
});

signaturePad.on('beforeUpdateStroke', (event) =&gt; {
    pointCount++;
    // Calculate velocity, pressure, etc.
});

// Custom event handling
canvas.addEventListener('mouseenter', () =&gt; {
    console.log('Mouse entered canvas');
});

canvas.addEventListener('mouseleave', () =&gt; {
    console.log('Mouse left canvas');
});</code></pre>
                                </div>
                                
                                <div id="events-analytics" class="code-panel">
                                    <pre><code>// Analytics tracking
function trackSignatureMetrics(signaturePad) {
    let metrics = {
        strokes: 0,
        totalPoints: 0,
        averageVelocity: 0,
        sessionDuration: 0,
        startTime: Date.now()
    };
    
    signaturePad.on('beginStroke', () =&gt; {
        metrics.strokes++;
        updateAnalytics(metrics);
    });
    
    signaturePad.on('endStroke', (event) =&gt; {
        metrics.totalPoints += event.points?.length || 0;
        metrics.sessionDuration = Date.now() - metrics.startTime;
        
        // Send to analytics service
        sendToAnalytics(metrics);
    });
}</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Data Export & Import Section -->
            <section class="advanced-section">
                <div class="advanced-header">
                    <h2>üíæ Advanced Data Handling</h2>
                    <p>Export signatures in multiple formats and implement robust data persistence</p>
                </div>
                <div class="advanced-content">
                    <div class="feature-showcase">
                        <div class="showcase-item">
                            <div class="showcase-header">Export Formats</div>
                            <div class="showcase-body">
                                <div class="signature-container medium">
                                    <canvas id="export-pad" class="signature-canvas"></canvas>
                                    <div class="signature-status" id="export-status">Create a signature to test exports</div>
                                </div>
                                
                                <div class="export-formats">
                                    <button class="format-btn" onclick="exportAs('png')">
                                        üì∑ PNG Image
                                    </button>
                                    <button class="format-btn" onclick="exportAs('svg')">
                                        üé® SVG Vector
                                    </button>
                                    <button class="format-btn" onclick="exportAs('json')">
                                        üìã JSON Data
                                    </button>
                                    <button class="format-btn" onclick="exportAs('base64')">
                                        üî§ Base64
                                    </button>
                                </div>
                                
                                <div id="export-preview" style="min-height: 100px; background: var(--background-secondary); border: 1px dashed var(--border-color); border-radius: 6px; padding: 1rem; margin: 1rem 0; font-family: monospace; font-size: 0.8rem; overflow-x: auto;">
                                    Export data will appear here...
                                </div>
                                
                                <div class="controls">
                                    <button class="btn btn-secondary" onclick="signatureDocs.clearPad('export-pad')">Clear Canvas</button>
                                    <button class="btn btn-primary" onclick="loadSampleSignature()">Load Sample</button>
                                </div>
                            </div>
                        </div>

                        <div class="showcase-item">
                            <div class="showcase-header">Export Implementation</div>
                            <div class="showcase-body">
                                <div class="code-tabs">
                                    <button class="code-tab active" onclick="switchTab(event, 'export-js')">Export Code</button>
                                    <button class="code-tab" onclick="switchTab(event, 'import-js')">Import Code</button>
                                </div>
                                
                                <div id="export-js" class="code-panel active">
                                    <pre><code>// PNG Export with custom options
const pngData = signaturePad.toDataURL('image/png');

// SVG Export (vector format)
const svgData = signaturePad.toSVG();

// JSON Export (full signature data)
const jsonData = JSON.stringify({
    signature: signaturePad.toData(),
    metadata: {
        timestamp: new Date().toISOString(),
        version: '1.0.0',
        device: navigator.userAgent
    }
});

// Base64 with custom background
const base64 = signaturePad.toDataURL('image/png', {
    backgroundColor: 'white'
});

// Download as file
function downloadSignature(dataUrl, filename) {
    const link = document.createElement('a');
    link.download = filename;
    link.href = dataUrl;
    link.click();
}</code></pre>
                                </div>
                                
                                <div id="import-js" class="code-panel">
                                    <pre><code>// Import from Data URL
signaturePad.fromDataURL(dataUrl);

// Import from JSON data
const signatureData = JSON.parse(jsonString);
signaturePad.fromData(signatureData.signature);

// Batch import multiple signatures
function importSignatures(signaturesArray) {
    signaturesArray.forEach((sig, index) =&gt; {
        setTimeout(() =&gt; {
            signaturePad.clear();
            signaturePad.fromData(sig.data);
            console.log(`Loaded signature ${index + 1}`);
        }, index * 1000);
    });
}

// Import with validation
function safeImport(data) {
    try {
        if (typeof data === 'string' && data.startsWith('data:')) {
            signaturePad.fromDataURL(data);
        } else if (Array.isArray(data)) {
            signaturePad.fromData(data);
        } else {
            throw new Error('Invalid signature data format');
        }
    } catch (error) {
        console.error('Import failed:', error);
    }
}</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Professional Integration Section -->
            <section class="advanced-section">
                <div class="advanced-header">
                    <h2>üè¢ Professional Integration</h2>
                    <p>Enterprise-ready patterns for forms, validation, and database integration</p>
                </div>
                <div class="advanced-content">
                    <div class="feature-showcase">
                        <div class="showcase-item">
                            <div class="showcase-header">Document Signing Workflow</div>
                            <div class="showcase-body">
                                <div style="background: var(--background-secondary); padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem;">
                                    <h4 style="margin-top: 0;">Legal Document</h4>
                                    <p style="margin-bottom: 1rem;">I hereby agree to the terms and conditions outlined in this document...</p>
                                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
                                        <div>
                                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Full Name:</label>
                                            <input type="text" id="signer-name" placeholder="Enter your full name" style="width: 100%; padding: 0.5rem; border: 1px solid var(--border-color); border-radius: 4px;">
                                        </div>
                                        <div>
                                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Date:</label>
                                            <input type="date" id="sign-date" style="width: 100%; padding: 0.5rem; border: 1px solid var(--border-color); border-radius: 4px;">
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="signature-container medium">
                                    <canvas id="document-pad" class="signature-canvas"></canvas>
                                    <div class="signature-status" id="document-status">Please sign above to complete the document</div>
                                </div>
                                
                                <div class="controls">
                                    <button class="btn btn-secondary" onclick="signatureDocs.clearPad('document-pad')">Clear</button>
                                    <button class="btn btn-primary" onclick="processDocument()">Process Document</button>
                                </div>
                                
                                <div id="document-result" style="display: none; margin-top: 1rem; padding: 1rem; background: #d4edda; border: 1px solid #c3e6cb; border-radius: 6px; color: #155724;">
                                    <h4>Document Processed Successfully!</h4>
                                    <p>Document ID: <span id="doc-id"></span></p>
                                    <p>Signature verified and stored securely.</p>
                                </div>
                            </div>
                        </div>

                        <div class="showcase-item">
                            <div class="showcase-header">Integration Code</div>
                            <div class="showcase-body">
                                <div class="code-tabs">
                                    <button class="code-tab active" onclick="switchTab(event, 'workflow-js')">Workflow</button>
                                    <button class="code-tab" onclick="switchTab(event, 'validation-js')">Validation</button>
                                    <button class="code-tab" onclick="switchTab(event, 'api-js')">API Integration</button>
                                </div>
                                
                                <div id="workflow-js" class="code-panel active">
                                    <pre><code>// Document signing workflow
class DocumentSigner {
    constructor(canvasId) {
        this.canvas = document.getElementById(canvasId);
        this.signaturePad = new SignaturePad(this.canvas);
        this.setupEventListeners();
    }
    
    setupEventListeners() {
        this.signaturePad.on('endStroke', () =&gt; {
            this.validateSignature();
        });
    }
    
    validateSignature() {
        if (!this.signaturePad.isEmpty()) {
            this.enableSubmitButton();
        }
    }
    
    async processDocument() {
        const documentData = {
            signerName: document.getElementById('signer-name').value,
            signDate: document.getElementById('sign-date').value,
            signature: this.signaturePad.toDataURL(),
            documentHash: this.generateDocumentHash(),
            timestamp: new Date().toISOString()
        };
        
        return await this.submitToServer(documentData);
    }
}</code></pre>
                                </div>
                                
                                <div id="validation-js" class="code-panel">
                                    <pre><code>// Signature validation system
class SignatureValidator {
    static validate(signaturePad, options = {}) {
        const errors = [];
        
        // Check if signature exists
        if (signaturePad.isEmpty()) {
            errors.push('Signature is required');
        }
        
        // Check signature complexity
        const data = signaturePad.toData();
        const totalPoints = data.reduce((sum, stroke) =&gt; 
            sum + stroke.points.length, 0);
            
        if (totalPoints &lt; options.minPoints || 10) {
            errors.push('Signature too simple');
        }
        
        // Check signature bounds
        const bounds = this.getSignatureBounds(data);
        if (bounds.width &lt; options.minWidth || 50) {
            errors.push('Signature too narrow');
        }
        
        return {
            isValid: errors.length === 0,
            errors: errors
        };
    }
    
    static getSignatureBounds(data) {
        let minX = Infinity, maxX = -Infinity;
        let minY = Infinity, maxY = -Infinity;
        
        data.forEach(stroke =&gt; {
            stroke.points.forEach(point =&gt; {
                minX = Math.min(minX, point.x);
                maxX = Math.max(maxX, point.x);
                minY = Math.min(minY, point.y);
                maxY = Math.max(maxY, point.y);
            });
        });
        
        return {
            width: maxX - minX,
            height: maxY - minY,
            x: minX,
            y: minY
        };
    }
}</code></pre>
                                </div>
                                
                                <div id="api-js" class="code-panel">
                                    <pre><code>// API integration for signature storage
class SignatureAPI {
    constructor(baseUrl, apiKey) {
        this.baseUrl = baseUrl;
        this.apiKey = apiKey;
    }
    
    async saveSignature(signatureData) {
        const response = await fetch(`${this.baseUrl}/signatures`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${this.apiKey}`
            },
            body: JSON.stringify({
                signature: signatureData.dataUrl,
                metadata: {
                    timestamp: new Date().toISOString(),
                    userAgent: navigator.userAgent,
                    dimensions: signatureData.dimensions
                }
            })
        });
        
        if (!response.ok) {
            throw new Error(`Failed to save signature: ${response.status}`);
        }
        
        return await response.json();
    }
    
    async getSignature(signatureId) {
        const response = await fetch(`${this.baseUrl}/signatures/${signatureId}`, {
            headers: {
                'Authorization': `Bearer ${this.apiKey}`
            }
        });
        
        if (!response.ok) {
            throw new Error(`Failed to get signature: ${response.status}`);
        }
        
        return await response.json();
    }
    
    async verifySignature(signatureId, documentHash) {
        const response = await fetch(`${this.baseUrl}/signatures/${signatureId}/verify`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${this.apiKey}`
            },
            body: JSON.stringify({ documentHash })
        });
        
        return await response.json();
    }
}</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="pro-tip">
                        <div class="pro-tip-title">Enterprise Security Best Practices</div>
                        <p>Always implement server-side validation, use HTTPS for transmission, store signatures with cryptographic hashes, implement audit trails, and consider adding biometric verification for high-security applications.</p>
                    </div>
                </div>
            </section>

            <!-- Next Steps -->
            <div class="nav-section">
                <div class="nav-card">
                    <div class="nav-card-content">
                        <h3>üéÆ Ready to Explore?</h3>
                        <p>You've mastered advanced SignaturePad.js features! Ready to try everything in our comprehensive interactive demo?</p>
                        <a href="demo.html" class="btn btn-primary">Full Interactive Demo</a>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 SignaturePad.js - Professional digital signature solutions</p>
        </div>
    </footer>

    <script src="shared.js"></script>
    <script>
        // Global variables for event tracking
        let strokeCount = 0;
        let pointCount = 0;
        let velocities = [];
        let sessionStart = Date.now();
        let strokeStartTime = 0;

        // Initialize all signature pads
        document.addEventListener('DOMContentLoaded', async () => {
            await signatureDocs.init();
            
            // Configuration pad
            signatureDocs.createSignaturePad('config-pad', {
                backgroundColor: '#ffffff',
                penColor: '#000000',
                minWidth: 0.5,
                maxWidth: 2.5,
                velocityFilterWeight: 0.7,
                throttle: 16
            });
            
            // Events monitoring pad
            const eventsPad = signatureDocs.createSignaturePad('events-pad', {
                backgroundColor: 'rgb(255, 255, 255)',
                penColor: 'rgb(0, 0, 0)'
            });
            
            // Setup event monitoring
            setupEventMonitoring(eventsPad);
            
            // Export demo pad
            signatureDocs.createSignaturePad('export-pad', {
                backgroundColor: 'rgb(255, 255, 255)',
                penColor: 'rgb(0, 0, 0)'
            });
            
            // Document signing pad
            signatureDocs.createSignaturePad('document-pad', {
                backgroundColor: 'rgb(255, 255, 255)',
                penColor: 'rgb(0, 0, 0)'
            });
            
            // Setup configuration controls
            setupConfigurationControls();
            
            // Set default date
            document.getElementById('sign-date').value = new Date().toISOString().split('T')[0];
        });

        // Configuration controls
        function setupConfigurationControls() {
            const controls = ['bg-color', 'pen-color', 'min-width', 'max-width', 'velocity', 'throttle'];
            
            controls.forEach(controlId => {
                const control = document.getElementById(controlId);
                if (control) {
                    control.addEventListener('input', updateConfiguration);
                    
                    // Update value display for range inputs
                    if (control.type === 'range') {
                        const valueSpan = document.getElementById(controlId + '-value');
                        if (valueSpan) {
                            control.addEventListener('input', () => {
                                valueSpan.textContent = control.value;
                            });
                        }
                    }
                }
            });
        }

        function updateConfiguration() {
            const config = {
                backgroundColor: document.getElementById('bg-color').value,
                penColor: document.getElementById('pen-color').value,
                minWidth: parseFloat(document.getElementById('min-width').value),
                maxWidth: parseFloat(document.getElementById('max-width').value),
                velocityFilterWeight: parseFloat(document.getElementById('velocity').value),
                throttle: parseInt(document.getElementById('throttle').value)
            };
            
            // Recreate the pad with new configuration
            signatureDocs.createSignaturePad('config-pad', config);
            
            // Update the code display
            updateCodeDisplay(config);
        }

        function updateCodeDisplay(config) {
            const codeElement = document.getElementById('current-config');
            if (codeElement) {
                codeElement.textContent = `// Current configuration
const signaturePad = new SignaturePad(canvas, {
    backgroundColor: '${config.backgroundColor}',
    penColor: '${config.penColor}',
    minWidth: ${config.minWidth},
    maxWidth: ${config.maxWidth},
    velocityFilterWeight: ${config.velocityFilterWeight},
    throttle: ${config.throttle}
});`;
            }
        }

        function resetToDefaults() {
            document.getElementById('bg-color').value = '#ffffff';
            document.getElementById('pen-color').value = '#000000';
            document.getElementById('min-width').value = '0.5';
            document.getElementById('max-width').value = '2.5';
            document.getElementById('velocity').value = '0.7';
            document.getElementById('throttle').value = '16';
            
            // Update value displays
            document.getElementById('min-width-value').textContent = '0.5';
            document.getElementById('max-width-value').textContent = '2.5';
            document.getElementById('velocity-value').textContent = '0.7';
            document.getElementById('throttle-value').textContent = '16';
            
            updateConfiguration();
        }

        // Event monitoring
        function setupEventMonitoring(pad) {
            pad.on('beginStroke', (event) => {
                strokeCount++;
                strokeStartTime = Date.now();
                logEvent('beginStroke', 'Stroke started');
                updateStats();
            });
            
            pad.on('endStroke', (event) => {
                const duration = Date.now() - strokeStartTime;
                logEvent('endStroke', `Stroke ended (${duration}ms)`);
                updateStats();
            });
            
            pad.on('beforeUpdateStroke', (event) => {
                pointCount++;
                if (event.point) {
                    // Calculate velocity (simplified)
                    velocities.push(Math.random() * 10); // Mock velocity calculation
                }
                updateStats();
            });
        }

        function logEvent(type, message) {
            const log = document.getElementById('event-log');
            const timestamp = new Date().toLocaleTimeString();
            log.innerHTML += `\n[${timestamp}] ${type}: ${message}`;
            log.scrollTop = log.scrollHeight;
        }

        function updateStats() {
            document.getElementById('stroke-count').textContent = strokeCount;
            document.getElementById('point-count').textContent = pointCount;
            
            const avgVelocity = velocities.length > 0 ? 
                (velocities.reduce((a, b) => a + b, 0) / velocities.length).toFixed(1) : 0;
            document.getElementById('avg-velocity').textContent = avgVelocity;
            
            const duration = Math.floor((Date.now() - sessionStart) / 1000);
            document.getElementById('duration').textContent = duration + 's';
        }

        function clearEventLog() {
            document.getElementById('event-log').innerHTML = 'Event log cleared...';
        }

        function resetStats() {
            strokeCount = 0;
            pointCount = 0;
            velocities = [];
            sessionStart = Date.now();
            updateStats();
            clearEventLog();
        }

        // Export functionality
        function exportAs(format) {
            const pad = signatureDocs.pads['export-pad'];
            if (!pad || pad.isEmpty()) {
                document.getElementById('export-preview').innerHTML = '‚ö†Ô∏è Please create a signature first';
                return;
            }
            
            const preview = document.getElementById('export-preview');
            
            switch (format) {
                case 'png':
                    const pngData = pad.toDataURL('image/png');
                    preview.innerHTML = `PNG Data URL (${pngData.length} characters):\n${pngData.substring(0, 200)}...`;
                    break;
                    
                case 'svg':
                    const svgData = pad.toSVG();
                    preview.innerHTML = `SVG Data (${svgData.length} characters):\n${svgData.substring(0, 200)}...`;
                    break;
                    
                case 'json':
                    const jsonData = JSON.stringify(pad.toData(), null, 2);
                    preview.innerHTML = `JSON Data (${jsonData.length} characters):\n${jsonData.substring(0, 300)}...`;
                    break;
                    
                case 'base64':
                    const base64Data = pad.toDataURL('image/png').split(',')[1];
                    preview.innerHTML = `Base64 Data (${base64Data.length} characters):\n${base64Data.substring(0, 200)}...`;
                    break;
            }
        }

        function loadSampleSignature() {
            const pad = signatureDocs.pads['export-pad'];
            if (pad) {
                // Create a simple sample signature programmatically
                const sampleData = [
                    {
                        "points": [
                            {"x": 100, "y": 150, "pressure": 0.5, "time": Date.now()},
                            {"x": 150, "y": 120, "pressure": 0.7, "time": Date.now() + 50},
                            {"x": 200, "y": 140, "pressure": 0.6, "time": Date.now() + 100},
                            {"x": 250, "y": 110, "pressure": 0.8, "time": Date.now() + 150}
                        ]
                    }
                ];
                pad.fromData(sampleData);
                document.getElementById('export-status').textContent = '‚úì Sample signature loaded';
            }
        }

        // Document processing
        function processDocument() {
            const name = document.getElementById('signer-name').value;
            const date = document.getElementById('sign-date').value;
            const pad = signatureDocs.pads['document-pad'];
            
            if (!name.trim()) {
                alert('Please enter your full name');
                return;
            }
            
            if (!date) {
                alert('Please select a date');
                return;
            }
            
            if (!pad || pad.isEmpty()) {
                alert('Please provide your signature');
                return;
            }
            
            // Generate mock document ID
            const docId = 'DOC-' + Date.now().toString(36).toUpperCase();
            
            // Show success
            document.getElementById('doc-id').textContent = docId;
            document.getElementById('document-result').style.display = 'block';
            document.getElementById('document-status').textContent = '‚úì Document signed successfully';
            
            console.log('Document processed:', {
                id: docId,
                signer: name,
                date: date,
                signature: pad.toDataURL(),
                timestamp: new Date().toISOString()
            });
        }

        // Tab switching
        function switchTab(event, tabId) {
            const tabContainer = event.target.closest('.showcase-body');
            const tabs = tabContainer.querySelectorAll('.code-tab');
            const panels = tabContainer.querySelectorAll('.code-panel');
            
            tabs.forEach(tab => tab.classList.remove('active'));
            panels.forEach(panel => panel.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabId).classList.add('active');
        }
    </script>
</body>
</html>