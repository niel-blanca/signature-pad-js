<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Usage - SignaturePad.js</title>
    <meta name="description" content="Master the powerful features of SignaturePad.js with professional-grade examples, event handling, custom configurations, and enterprise-level integrations.">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>üñãÔ∏è</text></svg>">
    
    <!-- Shared Styles -->
    <link rel="stylesheet" href="shared.css">
</head>
<body>
    <div class="container">
        <!-- Navigation -->
        <nav class="nav fade-in">
            <a href="./" class="nav-logo">üñãÔ∏è Signature Pad JS</a>
            <div class="nav-links">
                <a href="./" class="nav-link">Home</a>
                <a href="installation.html" class="nav-link">Installation</a>
                <a href="basic-usage.html" class="nav-link">Basic Usage</a>
                <a href="advanced-usage.html" class="nav-link active">Advanced</a>
                <a href="demo.html" class="nav-link">Demo</a>
                <a href="https://github.com/niel-blanca/signature-pad-js" class="nav-link">GitHub</a>
                <a href="https://www.npmjs.com/package/@niel-blanca/signature-pad" class="nav-link">NPM</a>
            </div>
        </nav>

        <!-- Page Header -->
        <div class="section fade-in">
            <div class="section-header">
                <h1 class="section-title">‚ö° Advanced Usage Guide</h1>
                <p class="section-subtitle">Master the powerful features of SignaturePad.js with professional-grade examples, event handling, custom configurations, and enterprise-level integrations.</p>
            </div>
        </div>

        <!-- Real-time Configuration Section -->
        <div class="card fade-in">
            <div class="card-header">
                <span class="card-icon">‚öôÔ∏è</span>
                <div>
                    <h2 class="card-title">Real-time Configuration</h2>
                    <p class="card-subtitle">Dynamically adjust signature pad settings and see changes instantly</p>
                </div>
            </div>
            <div class="card-content">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; align-items: start;">
                    <!-- Live Configuration Panel -->
                    <div class="controls">
                        <h3 style="margin-bottom: 20px; color: var(--text-color);">Live Configuration Panel</h3>
                        
                        <div class="control-group">
                            <label>Background Color</label>
                            <input type="color" value="#ffffff" class="color-picker" id="bg-color"
                                   onchange="updateConfig('backgroundColor', this.value)">
                        </div>
                        
                        <div class="control-group">
                            <label>Pen Color</label>
                            <input type="color" value="#000000" class="color-picker" id="pen-color"
                                   onchange="updateConfig('penColor', this.value)">
                        </div>
                        
                        <div class="control-group">
                            <label>Min Width: <span id="min-width-display">0.5</span></label>
                            <input type="range" min="0.1" max="3" step="0.1" value="0.5" class="thickness-slider"
                                   oninput="updateConfig('minWidth', this.value); document.getElementById('min-width-display').textContent = this.value">
                        </div>
                        
                        <div class="control-group">
                            <label>Max Width: <span id="max-width-display">2.5</span></label>
                            <input type="range" min="1" max="8" step="0.1" value="2.5" class="thickness-slider"
                                   oninput="updateConfig('maxWidth', this.value); document.getElementById('max-width-display').textContent = this.value">
                        </div>
                        
                        <div class="control-group">
                            <label>Velocity Filter: <span id="velocity-display">0.7</span></label>
                            <input type="range" min="0" max="1" step="0.1" value="0.7" class="thickness-slider"
                                   oninput="updateConfig('velocityFilterWeight', this.value); document.getElementById('velocity-display').textContent = this.value">
                        </div>
                        
                        <div class="control-group">
                            <label>Throttle (ms): <span id="throttle-display">16</span></label>
                            <input type="range" min="1" max="50" step="1" value="16" class="thickness-slider"
                                   oninput="updateConfig('throttle', this.value); document.getElementById('throttle-display').textContent = this.value">
                        </div>
                    </div>
                    
                    <!-- Configuration Code Display -->
                    <div>
                        <h3 style="margin-bottom: 20px; color: var(--text-color);">Configuration Code</h3>
                        <div class="code-block" data-lang="JavaScript" id="config-code">
// Current configuration will appear here
const signaturePad = new SignaturePad(canvas, {
    backgroundColor: '#ffffff',
    penColor: '#000000',
    minWidth: 0.5,
    maxWidth: 2.5,
    velocityFilterWeight: 0.7,
    throttle: 16
});
                        </div>
                    </div>
                </div>
                
                <!-- Live Demo -->
                <div class="demo-section" style="margin-top: 30px;">
                    <h3 class="demo-title">üîß Live Demo: Real-time Configuration</h3>
                    <div id="config-pad" class="signature-container large">
                        <div class="signature-placeholder">
                            Draw here to test your configuration
                        </div>
                    </div>
                    <div class="controls">
                        <button class="btn btn-secondary" onclick="signaturePads.config.clear()">Clear</button>
                        <div class="status-indicator status-empty" id="config-status">Canvas is empty</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Event Handling Section -->
        <div class="card fade-in">
            <div class="card-header">
                <span class="card-icon">üîî</span>
                <div>
                    <h2 class="card-title">Event Handling & Callbacks</h2>
                    <p class="card-subtitle">React to user interactions with powerful event callbacks</p>
                </div>
            </div>
            <div class="card-content">
                <div class="code-block" data-lang="JavaScript">
const signaturePad = new SignaturePad(canvas, {
    onBegin: function(event) {
        console.log('Signature started', event);
        // Track when user starts signing
        updateStatus('Drawing started...');
    },
    
    onEnd: function(event) {
        console.log('Signature ended', event);
        // Validate, save, or process signature
        if (!signaturePad.isEmpty()) {
            autoSave();
        }
    }
});

// Additional event listeners
signaturePad.addEventListener('beginStroke', function(event) {
    // Custom logic for stroke beginning
});

signaturePad.addEventListener('endStroke', function(event) {
    // Custom logic for stroke ending
});
                </div>

                <div class="demo-section">
                    <h3 class="demo-title">üîî Live Demo: Event Callbacks</h3>
                    <div id="events-pad" class="signature-container medium">
                        <div class="signature-placeholder">
                            Start drawing to see events in action
                        </div>
                    </div>
                    <div class="controls">
                        <button class="btn btn-secondary" onclick="signaturePads.events.clear()">Clear</button>
                        <div class="status-indicator status-empty" id="events-status">Canvas is empty</div>
                    </div>
                    <div class="output-section">
                        <h4 style="margin-bottom: 15px;">Event Log:</h4>
                        <div class="output-content" id="event-log">
No events yet. Start drawing to see events appear here.
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Data Export & Import Section -->
        <div class="card fade-in">
            <div class="card-header">
                <span class="card-icon">üíæ</span>
                <div>
                    <h2 class="card-title">Data Export & Import</h2>
                    <p class="card-subtitle">Save and load signatures in multiple formats</p>
                </div>
            </div>
            <div class="card-content">
                <div class="code-block" data-lang="JavaScript">
// Export as Data URL (Base64)
const pngData = signaturePad.toDataURL(); // PNG by default
const jpegData = signaturePad.toDataURL('image/jpeg', 0.8); // JPEG with quality

// Export as SVG
const svgData = signaturePad.toSVG();

// Export point data (for reconstruction)
const pointData = signaturePad.toData();

// Import from data URL
signaturePad.fromDataURL(pngData);

// Import from point data
signaturePad.fromData(pointData);

// Clear before importing
signaturePad.clear();
signaturePad.fromDataURL(savedSignature);
                </div>

                <div class="demo-section">
                    <h3 class="demo-title">üíæ Live Demo: Export & Import</h3>
                    <div id="export-pad" class="signature-container medium">
                        <div class="signature-placeholder">
                            Draw a signature to test export/import
                        </div>
                    </div>
                    <div class="controls">
                        <button class="btn btn-primary" onclick="exportSignature('png')">Export PNG</button>
                        <button class="btn btn-primary" onclick="exportSignature('jpeg')">Export JPEG</button>
                        <button class="btn btn-primary" onclick="exportSignature('svg')">Export SVG</button>
                        <button class="btn btn-info" onclick="saveSignature()">Save to Memory</button>
                        <button class="btn btn-success" onclick="loadSignature()">Load from Memory</button>
                        <button class="btn btn-secondary" onclick="signaturePads.export.clear()">Clear</button>
                        <div class="status-indicator status-empty" id="export-status">Canvas is empty</div>
                    </div>
                    <div class="output-section">
                        <h4 style="margin-bottom: 15px;">Export Output:</h4>
                        <div class="output-content" id="export-output">
No data exported yet. Click an export button to see the output.
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Performance Optimization Section -->
        <div class="card fade-in">
            <div class="card-header">
                <span class="card-icon">‚ö°</span>
                <div>
                    <h2 class="card-title">Performance Optimization</h2>
                    <p class="card-subtitle">Optimize for high-performance applications and large canvases</p>
                </div>
            </div>
            <div class="card-content">
                <div class="code-block" data-lang="JavaScript">
// High-performance configuration
const signaturePad = new SignaturePad(canvas, {
    throttle: 8,              // Lower throttle for smoother drawing
    minPointDistance: 3,      // Reduce point density
    velocityFilterWeight: 0.9, // Higher smoothing
    
    // Optimize for large canvases
    dotSize: 0,               // Disable dots for single points
    
    // Custom drawing performance
    onBegin: function() {
        // Disable other UI updates during drawing
        document.body.style.pointerEvents = 'none';
        canvas.style.pointerEvents = 'auto';
    },
    
    onEnd: function() {
        // Re-enable UI
        document.body.style.pointerEvents = 'auto';
    }
});

// Manual cleanup for memory management
function cleanup() {
    signaturePad.off(); // Remove event listeners
    // Additional cleanup logic
}
                </div>

                <div class="demo-section">
                    <h3 class="demo-title">‚ö° Live Demo: Performance Optimized</h3>
                    <div id="performance-pad" class="signature-container large">
                        <div class="signature-placeholder">
                            High-performance drawing canvas
                        </div>
                    </div>
                    <div class="controls">
                        <button class="btn btn-secondary" onclick="signaturePads.performance.clear()">Clear</button>
                        <div class="status-indicator status-empty" id="performance-status">Canvas is empty</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Multiple Signature Pads Section -->
        <div class="card fade-in">
            <div class="card-header">
                <span class="card-icon">üìÑ</span>
                <div>
                    <h2 class="card-title">Multiple Signature Pads</h2>
                    <p class="card-subtitle">Manage multiple signature pads on a single page</p>
                </div>
            </div>
            <div class="card-content">
                <div class="code-block" data-lang="JavaScript">
// Create multiple signature pads with different configurations
const pads = {};

function initializeMultiplePads() {
    const configs = [
        { id: 'customer', color: '#3182ce', title: 'Customer Signature' },
        { id: 'witness', color: '#e53e3e', title: 'Witness Signature' },
        { id: 'agent', color: '#38a169', title: 'Agent Signature' }
    ];
    
    configs.forEach(config => {
        const canvas = document.getElementById(config.id + '-canvas');
        pads[config.id] = new SignaturePad(canvas, {
            penColor: config.color,
            backgroundColor: '#ffffff'
        });
    });
}

// Validate all signatures
function validateAllSignatures() {
    const results = {};
    Object.keys(pads).forEach(key => {
        results[key] = !pads[key].isEmpty();
    });
    return results;
}
                </div>

                <div class="demo-section">
                    <h3 class="demo-title">üìÑ Live Demo: Multiple Signature Pads</h3>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                        <div>
                            <h4 style="color: var(--accent-color); margin-bottom: 10px;">üë§ Customer Signature</h4>
                            <div id="customer-pad" class="signature-container small">
                                <div class="signature-placeholder">Customer signs here</div>
                            </div>
                            <div class="status-indicator status-empty" id="customer-status">Empty</div>
                        </div>
                        
                        <div>
                            <h4 style="color: var(--danger-color); margin-bottom: 10px;">üë• Witness Signature</h4>
                            <div id="witness-pad" class="signature-container small">
                                <div class="signature-placeholder">Witness signs here</div>
                            </div>
                            <div class="status-indicator status-empty" id="witness-status">Empty</div>
                        </div>
                        
                        <div>
                            <h4 style="color: var(--success-color); margin-bottom: 10px;">üè¢ Agent Signature</h4>
                            <div id="agent-pad" class="signature-container small">
                                <div class="signature-placeholder">Agent signs here</div>
                            </div>
                            <div class="status-indicator status-empty" id="agent-status">Empty</div>
                        </div>
                    </div>
                    
                    <div class="controls" style="margin-top: 20px;">
                        <button class="btn btn-primary" onclick="validateAllPads()">Validate All</button>
                        <button class="btn btn-secondary" onclick="clearAllPads()">Clear All</button>
                        <button class="btn btn-success" onclick="exportAllPads()">Export All</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Next Steps -->
        <div class="section fade-in">
            <div class="section-header">
                <h2 class="section-title">üéØ Explore More</h2>
                <p class="section-subtitle">Continue your SignaturePad.js journey</p>
            </div>
            <div class="section-content">
                <div class="features-grid">
                    <div class="feature-card">
                        <span class="feature-icon">üìñ</span>
                        <h3>Basic Usage</h3>
                        <p>Need to review the fundamentals? Go back to the basic usage guide.</p>
                        <a href="basic-usage.html" class="btn btn-secondary mt-20">Basic Guide</a>
                    </div>
                    <div class="feature-card">
                        <span class="feature-icon">üéÆ</span>
                        <h3>Interactive Demo</h3>
                        <p>Test all features in our comprehensive interactive playground.</p>
                        <a href="demo.html" class="btn btn-primary mt-20">Try Demo</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Load signature_pad library -->
    <script src="https://cdn.jsdelivr.net/npm/signature_pad@4.0.0/dist/signature_pad.umd.min.js"></script>
    <!-- Load shared JavaScript -->
    <script src="shared.js"></script>

    <script>
        let savedSignatureData = null;
        let eventLogCount = 0;

        // Initialize signature pads when page loads
        document.addEventListener('DOMContentLoaded', function() {
            signaturePads.init([
                { id: 'config', config: { backgroundColor: '#ffffff', penColor: '#000000' } },
                { 
                    id: 'events', 
                    config: {
                        onBegin: function() {
                            logEvent('Drawing started');
                        },
                        onEnd: function() {
                            logEvent('Drawing ended');
                        }
                    }
                },
                { id: 'export', config: {} },
                { id: 'performance', config: { throttle: 8, minPointDistance: 3, velocityFilterWeight: 0.9 } },
                { id: 'customer', config: { penColor: '#3182ce' } },
                { id: 'witness', config: { penColor: '#e53e3e' } },
                { id: 'agent', config: { penColor: '#38a169' } }
            ]);
        });

        // Configuration functions
        function updateConfig(property, value) {
            const pad = signaturePads.config;
            if (pad) {
                pad[property] = value;
                updateConfigCode();
            }
        }

        function updateConfigCode() {
            const bgColor = document.getElementById('bg-color').value;
            const penColor = document.getElementById('pen-color').value;
            const minWidth = document.querySelector('input[oninput*="minWidth"]').value;
            const maxWidth = document.querySelector('input[oninput*="maxWidth"]').value;
            const velocity = document.querySelector('input[oninput*="velocityFilterWeight"]').value;
            const throttle = document.querySelector('input[oninput*="throttle"]').value;

            const code = `// Current configuration will appear here
const signaturePad = new SignaturePad(canvas, {
    backgroundColor: '${bgColor}',
    penColor: '${penColor}',
    minWidth: ${minWidth},
    maxWidth: ${maxWidth},
    velocityFilterWeight: ${velocity},
    throttle: ${throttle}
});`;
            
            document.getElementById('config-code').textContent = code;
        }

        // Event logging
        function logEvent(message) {
            eventLogCount++;
            const log = document.getElementById('event-log');
            const timestamp = new Date().toLocaleTimeString();
            log.textContent += `[${timestamp}] ${eventLogCount}. ${message}\n`;
            log.scrollTop = log.scrollHeight;
        }

        // Export functions
        function exportSignature(format) {
            const pad = signaturePads.export;
            if (pad.isEmpty()) {
                alert('Please draw a signature first!');
                return;
            }

            let data;
            switch (format) {
                case 'png':
                    data = pad.toDataURL();
                    break;
                case 'jpeg':
                    data = pad.toDataURL('image/jpeg', 0.8);
                    break;
                case 'svg':
                    data = pad.toSVG();
                    break;
            }

            document.getElementById('export-output').textContent = data.substring(0, 500) + '...';
            
            // Download the file
            const link = document.createElement('a');
            link.download = `signature.${format}`;
            link.href = data;
            link.click();
        }

        function saveSignature() {
            const pad = signaturePads.export;
            if (pad.isEmpty()) {
                alert('Please draw a signature first!');
                return;
            }
            savedSignatureData = pad.toDataURL();
            alert('Signature saved to memory!');
        }

        function loadSignature() {
            if (!savedSignatureData) {
                alert('No signature data saved! Please save a signature first.');
                return;
            }
            signaturePads.export.fromDataURL(savedSignatureData);
            alert('Signature loaded from memory!');
        }

        // Multiple pads functions
        function validateAllPads() {
            const pads = ['customer', 'witness', 'agent'];
            const results = pads.map(id => ({
                id,
                isEmpty: signaturePads[id].isEmpty()
            }));
            
            const message = results.map(r => 
                `${r.id}: ${r.isEmpty ? 'Empty' : 'Signed'}`
            ).join('\n');
            
            alert('Validation Results:\n' + message);
        }

        function clearAllPads() {
            ['customer', 'witness', 'agent'].forEach(id => {
                signaturePads[id].clear();
            });
        }

        function exportAllPads() {
            const results = {};
            ['customer', 'witness', 'agent'].forEach(id => {
                if (!signaturePads[id].isEmpty()) {
                    results[id] = signaturePads[id].toDataURL();
                }
            });
            
            if (Object.keys(results).length === 0) {
                alert('No signatures to export!');
                return;
            }
            
            console.log('Exported signatures:', results);
            alert(`Exported ${Object.keys(results).length} signature(s). Check browser console for data.`);
        }
    </script>
</body>
</html>